package IOStream;

import java.util.*;

import wiley_core_java.Records;

import java.io.*;

public class StudentReader {
	DataInputStream dataInput;
	
	public StudentReader(String inputFile) throws FileNotFoundException {
		dataInput= new DataInputStream(new FileInputStream(inputFile));
	}
	// data in byte format
	
	public List<Records> readAll() throws IOException {
		List<Records> list= new ArrayList<>();
		
		try {
			while(true) {
				String name=dataInput.readUTF();
				boolean gender= dataInput.readBoolean();
				int age =dataInput.readInt();
				float grade= dataInput.readFloat();
				System.out.println("name::" +name);
				
				Records record= new Records(name,age,gender,grade);
				list.add(record);
			}
		}catch(Exception e) {
			e.printStackTrace();
		}
		dataInput.close();
		return list;
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
//		if(args.length<1) {
//			System.out.println("Please provide output file");
//			System.exit(0);
//		}
		
		String inputFile= "D:\\WTraining\\java_concepts\\wiley_core_java\\data\\Student1.dat";
		
		try {
			StudentReader reader= new StudentReader(inputFile);
			List<Records> l=reader.readAll();
			
			for(Records r: l) {
				System.out.println(r.getName()+"\t");
				System.out.println(r.getAge()+"\t");
				System.out.println(r.isGender()+"\t");
				System.out.println(r.getGrade());

			}
			
		} catch (Exception e) {
			// TODO: handle exception
			e.printStackTrace();
		}

	}

}
